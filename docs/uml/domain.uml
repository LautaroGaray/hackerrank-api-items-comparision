@startuml Domain Model

skinparam classAttributeIconSize 0

class Item {
  - String id
  - String name
  - String imageUrl
  - String description
  - BigDecimal price
  - Double rating
  --
  + Item(id, name, imageUrl, description, price, rating)
  + Item(name, imageUrl, description, price, rating) // without id
  + withId(String newId) : Item
  + id() : String
  + name() : String
  + price() : BigDecimal
  + rating() : Double
}

class User {
  - String username
  - String password
  --
  + User(String, String)
  + username() : String
  + password() : String
}

class ComparisionResult {
  - Item cheaperItem
  - Item betterRatedItem
  --
  + ComparisionResult(Item, Item)
  + cheaperItem() : Item
  + betterRatedItem() : Item
}

class ItemValidator {
  + {static} validate(Item) : void
  - {static} validatePrice(BigDecimal)
  - {static} validateRating(Double)
}

class InvalidItemException {
  + InvalidItemException(String)
}

class ItemNotFoundException {
  + ItemNotFoundException(String)
}

class CreateItemRequest {
  - String name
  - String imageUrl
  - String description
  - BigDecimal price
  - Double rating
  --
  + CreateItemRequest(...)
}

ItemValidator ..> Item : validates
ItemValidator ..> InvalidItemException : throws
ComparisionResult "1" *-- "2" Item : contains
CreateItemRequest ..> Item : converts to

note right of Item
  Immutable record
  - Constructor with id (for updates/gets)
  - Constructor without id (for creation)
  - withId() creates new instance with ID
end note

note right of ItemValidator
  Domain service
  Does NOT validate id
  (id is auto-generated)
end note

note right of CreateItemRequest
  DTO for POST /items
  Does NOT include id field
  Used only for creation
end note

@enduml